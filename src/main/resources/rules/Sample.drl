package com.sample
 
import javax.swing.*;
import java.awt.*;
import java.util.ArrayList;

declare enum AnswerNames
	YES_MONEY("Yes"), NO_MONEY("No"), YES_TALENT("Yes"), NO_TALENT("No");
	fullName : String
end

declare Answer
	answer : AnswerNames;
end

declare Question
	qText : String;
	answers : ArrayList;
end

rule "Ask Question"
when
	q : Question();
then
	ArrayList<String> answers = new ArrayList<String>();
	for(Object a : q.getAnswers()){
		answers.add(((Answer)a).getAnswer().getFullName());
	}
	int result = DroolsTest.ShowQuestion(q.getQText(), answers);
	System.out.println("Question asked!");
	System.out.println("Result: " + Integer.toString(result));
	// Tutaj jeszce musi wstawiac odpowiedni fakt odpowiedzi na podstawie otrzymanego inta
	Answer userAnswer = (Answer)q.getAnswers().get(result);
	insert(userAnswer);
	// Usuwa fakt pytania z pamieci (chociaz to nie jest calkowicie konieczne?)
	retract(q);
end

rule "Do you love Money"
when
	not Answer(answer == AnswerNames.YES_MONEY);
	not Answer(answer == AnswerNames.NO_MONEY);
then
	System.out.println("Money");
	ArrayList<Answer> answers_tmp = new ArrayList<Answer>();
	answers_tmp.add(new Answer(AnswerNames.YES_MONEY));
	answers_tmp.add(new Answer(AnswerNames.NO_MONEY));
	Question q = new Question("Do you love money?", answers_tmp);
	insert(q);
end

rule "Do you have exceptional talent"
when
	not Answer(answer == AnswerNames.YES_TALENT);
	not Answer(answer == AnswerNames.NO_TALENT);
	Answer(answer == AnswerNames.NO_MONEY); 
then
	System.out.println("Talent");
	ArrayList<Answer> answers_tmp = new ArrayList<Answer>();
	answers_tmp.add(new Answer(AnswerNames.YES_TALENT));
	answers_tmp.add(new Answer(AnswerNames.NO_TALENT));
	Question q = new Question("Do you have exceptional talent?", answers_tmp);
	insert(q);
end

